(self.webpackChunkeditor_demo=self.webpackChunkeditor_demo||[]).push([[483],{483:(e,t,o)=>{o.r(t),o.d(t,{default:()=>A});var i=o(25787),n=o(94770),r=o(44021),a=o(38875),s=o(76733),u=o(20755),d=o(43226),c=o(81034),l=o(67593),p=o(10409),m=o(69286),g=o(92425),h=o(84787),T=o(36293);function I(e){return t=>{const o=new FileReader;return e.loading$.next(!0),o.readAsDataURL(t),(0,p.R)(o,"load").pipe((0,m.g)(2e3),(0,g.U)((()=>String(o.result))),(0,h.w)((t=>e.save(t))),(0,T.x)((()=>e.loading$.next(!1))))}}var b=o(8239),f=o(56424),v=o(3489);let L=(()=>{var e;class t{constructor(){this.loading$=new f.X(!1)}static createBody(e){const t=new FormData;return t.append("image",e.split(",").pop()||""),new URLSearchParams(t)}get isLoading(){return this.loading$.getValue()}save(e){return(0,v.D)(fetch("https://api.imgbb.com/1/upload?key=3c1615980dcf693b282c4b0fb608b28a&expiration=300",{method:"POST",body:t.createBody(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){var e=(0,b.Z)((function*(e){return e.json()}));return function(t){return e.apply(this,arguments)}}())).pipe((0,g.U)((e=>e.data.url)))}}return(e=t).ɵfac=function(t){return new(t||e)},e.ɵprov=u.Yz7({token:e,factory:e.ɵfac,providedIn:"root"}),t})();var Z=o(38454),y=o(35396),w=o(304);const S=function(){return[]};let x=(()=>{var e;class t{constructor(){this.isStackblitz=(0,u.f3M)(c.SgE),this.relativePath=this.isStackblitz?"https://taiga-ui.dev/":"",this.doc=(0,u.f3M)(s.K0),this.imgbbService=(0,u.f3M)(L),this.builtInTools=[a.TuiEditorTool.Undo,a.TuiEditorTool.Img],this.control=new d.NI(""),this.validator=({value:e})=>this.editor?.focused||this.imgbbService.isLoading||!this.doc.hasFocus()||e.length?null:{empty:new c.T8v("ERROR: content must not be empty")},this.control.patchValue(`\n                <img data-type="image-editor" src="${this.relativePath}assets/images/lumberjack.png" width="300">\n                <p>Try to drag right border of image!</p>\n                <p>To change min/max size of image use token <code>TUI_IMAGE_EDITOR_OPTIONS</code>.</p>\n                <img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDUwIDUwIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiPjxzdHlsZT4uYXtmaWxsOiNkZDAwMzF9LmJ7ZmlsbDojYzMwMDJmfS5je2ZpbGw6I2ZmZn08L3N0eWxlPjxwYXRoIGNsYXNzPSJhIiBkPSJtNDMuNiAxMi42bC0yLjggMjQuNy0xNS44IDguNy0xNS44LTguNy0yLjgtMjQuNyAxOC42LTYuNnoiLz48cGF0aCBjbGFzcz0iYiIgZD0ibTI1IDZsMTguNiA2LjYtMi44IDI0LjctMTUuOCA4Ljd2LTE1LjMtMjAuMy00LjR6Ii8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGFzcz0iYyIgZD0ibTM2LjYgMzYuNWgtNC4zbC0yLjQtNS44aC05LjlsLTIuMyA1LjhoLTQuM2wxMS42LTI2LjF6bS0xMS42LTE3LjZsLTMuNCA4LjJoNi44eiIvPjwvc3ZnPg==" />`)}}return(e=t).ɵfac=function(t){return new(t||e)},e.ɵcmp=u.Xpm({type:e,selectors:[["tui-editor-upload-images-example-1"]],viewQuery:function(e,t){if(1&e&&u.Gf(a.TuiEditorComponent,7),2&e){let e;u.iGM(e=u.CRH())&&(t.editor=e.first)}},standalone:!0,features:[u._Bn([c.a31,{provide:a.TUI_EDITOR_EXTENSIONS,deps:[u.zs3],useFactory:e=>[Promise.resolve().then(o.bind(o,38875)).then((({TuiStarterKit:e})=>e)),Promise.resolve().then(o.bind(o,38875)).then((({tuiCreateImageEditorExtension:t})=>t({injector:e}))),Promise.resolve().then(o.bind(o,5664)).then((({default:e})=>e.configure({inline:!0,allowBase64:!0})))]},{provide:a.TUI_IMAGE_EDITOR_OPTIONS,useValue:{minWidth:100,maxWidth:400}},{provide:a.TUI_IMAGE_LOADER,useFactory:I,deps:[L]}]),u.jDz],decls:13,vars:16,consts:[[3,"overlay","showLoader"],[1,"editor",3,"formControl","tools","tuiValidator"],[3,"error","formControl"],[3,"content"]],template:function(e,t){1&e&&(u.TgZ(0,"tui-loader",0),u.ALo(1,"async"),u._UZ(2,"tui-editor",1),u.qZA(),u._UZ(3,"tui-error",2),u.ALo(4,"async"),u.ALo(5,"tuiFieldError"),u.TgZ(6,"h4"),u._uU(7,"HTML:"),u.qZA(),u._UZ(8,"tui-editor-socket",3),u.TgZ(9,"h4"),u._uU(10,"Text:"),u.qZA(),u.TgZ(11,"p"),u._uU(12),u.qZA()),2&e&&(u.Q6J("overlay",!0)("showLoader",!!u.lcZ(1,9,t.imgbbService.loading$)),u.xp6(2),u.Q6J("formControl",t.control)("tools",t.builtInTools)("tuiValidator",t.validator),u.xp6(1),u.Q6J("error",u.lcZ(4,11,u.lcZ(5,13,u.DdM(15,S))))("formControl",t.control),u.xp6(5),u.Q6J("content",t.control.value||""),u.xp6(4),u.Oqu(t.control.value))},dependencies:[r.Shu,Z.v,r.dSp,y.k,s.Ov,c.WJ2,d.UX,d.JJ,d.oH,l.YuV,w.A,a.TuiEditorSocketComponent,a.TuiEditorComponent],encapsulation:2,changeDetection:0}),t})();var M=o(99976),N=o(41071),j=o(80948);const A=(()=>{var e;class t{constructor(){this.example1={TypeScript:o.e(585).then(o.t.bind(o,30585,17)),HTML:o.e(6036).then(o.t.bind(o,46036,17)),"image-loader.ts":o.e(5227).then(o.t.bind(o,5227,17)),"imgbb.service.ts":o.e(1646).then(o.t.bind(o,61646,17))}}}return(e=t).ɵfac=function(t){return new(t||e)},e.ɵcmp=u.Xpm({type:e,selectors:[["ng-component"]],standalone:!0,features:[u._Bn([{provide:a.TUI_EDITOR_EXTENSIONS,useValue:a.TUI_EDITOR_DEFAULT_EXTENSIONS}]),u.jDz],decls:11,vars:1,consts:[["header","Editor","type","components"],["href","https://www.tiptap.dev/","tuiLink",""],["fragment","sanitizer","routerLink","/icons/bundled","tuiLink",""],["id","upload-images","heading","Upload images to a web server",3,"content"]],template:function(e,t){1&e&&(u.TgZ(0,"tui-doc-page",0)(1,"p"),u._uU(2," Rich Text Editor based on "),u.TgZ(3,"a",1),u._uU(4," TipTap Editor "),u.qZA(),u._uU(5," for using with Angular forms. For safety reasons use a "),u.TgZ(6,"a",2),u._uU(7," sanitizer "),u.qZA(),u._uU(8," with this component. "),u.qZA(),u.TgZ(9,"tui-doc-example",3),u._UZ(10,"tui-editor-upload-images-example-1"),u.qZA()()),2&e&&(u.xp6(9),u.Q6J("content",t.example1))},dependencies:[n.u4,M.f,x,n.Lq,N.q,r.jzK,j.V,i.rH],encapsulation:2,changeDetection:0}),t})()}}]);