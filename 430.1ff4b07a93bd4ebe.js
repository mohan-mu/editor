(self.webpackChunkeditor_demo=self.webpackChunkeditor_demo||[]).push([[430],{430:(t,e,n)=>{n.r(e),n.d(e,{default:()=>h});var o,i=n(84911),s=n(76733),r=n(43226),a=n(33407),l=n(12589),u=n(77202),c=n(26624),d=n(20755),m=n(52614),p=n(99942);function g(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"button",5),d.NdJ("click",(function(){const e=d.CHM(t).$implicit,n=d.oxw();return d.KtG(n.setMention(e))}))("keydown.enter",(function(){const e=d.CHM(t).$implicit,n=d.oxw();return d.KtG(n.setMention(e))})),d._uU(1),d._UZ(2,"tui-avatar",6),d.ALo(3,"tuiInitials"),d.qZA()}if(2&t){const t=e.$implicit;d.xp6(1),d.hij(" ",t.name," "),d.xp6(1),d.Q6J("src",t.avatar||d.lcZ(3,2,t.name))}}class f{constructor(){this.builtInTools=[c.TuiEditorTool.Undo,c.TuiEditorTool.Size,c.TuiEditorTool.Link],this.control=new r.NI('\n        <p><span class="my-mention" data-type="mention">@a.inkin</span> FYI</p>\n    '),this.items=[{name:"Alexander Inkin",avatar:"https://taiga-ui.dev/assets/images/avatar.jpg",login:"a.inkin"},{name:"Roman Sedov",avatar:"",login:"r.sedov"}]}getFilteredItems(t,e){return e?.length?t.filter((({name:t,login:n})=>n.toLocaleLowerCase().startsWith(e.toLocaleLowerCase())||t.toLocaleLowerCase().startsWith(e.toLocaleLowerCase()))):t}setMention(t){const e=this.wysiwyg?.editor?.getOriginTiptapEditor();if(!e)return;const n=`<span class="my-mention" data-type="mention">@${t.login}</span>&nbsp;`,o=e.state.selection.to,i=e.state.selection.from-(this.wysiwyg?.mentionSuggestions.length??0)-1;e.chain().focus().insertContentAt({from:i,to:o},n).run()}}(o=f).ɵfac=function(t){return new(t||o)},o.ɵcmp=d.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&d.Gf(c.TuiEditorComponent,5),2&t){let t;d.iGM(t=d.CRH())&&(e.wysiwyg=t.first)}},standalone:!0,features:[d._Bn([{provide:c.TUI_EDITOR_EXTENSIONS,useValue:[Promise.resolve().then(n.bind(n,26624)).then((({TuiStarterKit:t})=>t)),Promise.resolve().then(n.bind(n,26624)).then((({TuiLink:t})=>t)),Promise.resolve().then(n.bind(n,23740)).then((({default:t})=>t)),Promise.resolve().then(n.bind(n,26624)).then((({TuiMention:t})=>t))]}]),d.jDz],decls:11,vars:5,consts:[[3,"formControl","tools"],["ngProjectAs","mention",5,["mention"]],[3,"mouseleave.capture"],["tuiOption","",3,"click","keydown.enter",4,"ngFor","ngForOf"],[3,"content"],["tuiOption","",3,"click","keydown.enter"],["size","s",3,"src"]],template:function(t,e){1&t&&(d.TgZ(0,"tui-editor",0),d.ynx(1,1),d.TgZ(2,"tui-data-list",2),d.NdJ("mouseleave.capture",(function(t){return t.stopPropagation()})),d.YNc(3,g,4,4,"button",3),d.qZA(),d.BQk(),d.qZA(),d.TgZ(4,"h4"),d._uU(5,"HTML:"),d.qZA(),d._UZ(6,"tui-editor-socket",4),d.TgZ(7,"h4"),d._uU(8,"Text:"),d.qZA(),d.TgZ(9,"p"),d._uU(10),d.qZA()),2&t&&(d.Q6J("formControl",e.control)("tools",e.builtInTools),d.xp6(3),d.Q6J("ngForOf",e.getFilteredItems(e.items,null==e.wysiwyg?null:e.wysiwyg.mentionSuggestions)),d.xp6(3),d.Q6J("content",e.control.value||""),d.xp6(4),d.Oqu(e.control.value))},dependencies:[c.TuiEditorComponent,r.UX,r.JJ,r.oH,l.pcV,m.q,p.v,s.sg,u.JPE,l.XCq,c.TuiEditorSocketComponent],styles:["[_nghost-%COMP%]     .my-mention{background:var(--tui-autofill);border:1px solid var(--tui-base-08);border-radius:.4rem;padding:.1rem .3rem;cursor:default}"],changeDetection:0}),(0,i.gn)([a.UMq],f.prototype,"getFilteredItems",null);const h=f}}]);