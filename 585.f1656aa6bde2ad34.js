(self.webpackChunkeditor_demo=self.webpackChunkeditor_demo||[]).push([[585],{30585:i=>{i.exports="import {AsyncPipe, DOCUMENT} from '@angular/common';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    inject,\n    Injector,\n    ViewChild,\n} from '@angular/core';\nimport type {AbstractControl, ValidationErrors} from '@angular/forms';\nimport {FormControl, ReactiveFormsModule} from '@angular/forms';\nimport {TuiValidationError, TuiValidator} from '@taiga-ui/cdk';\nimport {TuiError, TuiLoader} from '@taiga-ui/core';\nimport {\n    TUI_EDITOR_EXTENSIONS,\n    TUI_IMAGE_EDITOR_OPTIONS,\n    TUI_IMAGE_LOADER,\n    TuiEditor,\n    TuiEditorSocket,\n    TuiEditorTool,\n} from '@taiga-ui/editor';\nimport {TuiFieldErrorPipe} from '@taiga-ui/kit';\n\nimport {imageLoader} from './image-loader';\nimport {ImgbbService} from './imgbb.service';\n\n@Component({\n    standalone: true,\n    imports: [\n        TuiError,\n        TuiLoader,\n        AsyncPipe,\n        TuiValidator,\n        ReactiveFormsModule,\n        TuiFieldErrorPipe,\n        TuiEditorSocket,\n        TuiEditor,\n    ],\n    templateUrl: './index.html',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        {\n            provide: TUI_EDITOR_EXTENSIONS,\n            deps: [Injector],\n            useFactory: (injector: Injector) => [\n                import('@taiga-ui/editor').then(({TuiStarterKit}) => TuiStarterKit),\n                import('@taiga-ui/editor').then(({tuiCreateImageEditorExtension}) =>\n                    tuiCreateImageEditorExtension({injector}),\n                ),\n            ],\n        },\n        {\n            provide: TUI_IMAGE_EDITOR_OPTIONS,\n            useValue: {\n                minWidth: 100,\n                maxWidth: 400,\n            },\n        },\n        {\n            provide: TUI_IMAGE_LOADER,\n            useFactory: imageLoader,\n            deps: [ImgbbService],\n        },\n    ],\n})\nexport default class Example {\n    @ViewChild(TuiEditor, {static: true})\n    private readonly editor?: TuiEditor;\n\n    protected readonly doc = inject(DOCUMENT);\n    protected readonly imgbbService = inject(ImgbbService);\n    protected readonly builtInTools = [TuiEditorTool.Undo, TuiEditorTool.Img];\n\n    protected control = new FormControl('');\n\n    constructor() {\n        this.control.patchValue(\n            `\n                <img src=\"assets/images/lumberjack.png\" width=\"300\" />\n                <p>Try to drag right border of image!</p>\n                <p>To change min/max size of image use token <code>TUI_IMAGE_EDITOR_OPTIONS</code>.</p>\n                <img src=\"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDUwIDUwIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiPjxzdHlsZT4uYXtmaWxsOiNkZDAwMzF9LmJ7ZmlsbDojYzMwMDJmfS5je2ZpbGw6I2ZmZn08L3N0eWxlPjxwYXRoIGNsYXNzPSJhIiBkPSJtNDMuNiAxMi42bC0yLjggMjQuNy0xNS44IDguNy0xNS44LTguNy0yLjgtMjQuNyAxOC42LTYuNnoiLz48cGF0aCBjbGFzcz0iYiIgZD0ibTI1IDZsMTguNiA2LjYtMi44IDI0LjctMTUuOCA4Ljd2LTE1LjMtMjAuMy00LjR6Ii8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGFzcz0iYyIgZD0ibTM2LjYgMzYuNWgtNC4zbC0yLjQtNS44aC05LjlsLTIuMyA1LjhoLTQuM2wxMS42LTI2LjF6bS0xMS42LTE3LjZsLTMuNCA4LjJoNi44eiIvPjwvc3ZnPg==\" />`,\n        );\n    }\n\n    protected readonly validator = ({value}: AbstractControl): ValidationErrors | null =>\n        this.editor?.focused ||\n        this.imgbbService.isLoading ||\n        !this.doc.hasFocus() || // possible that file dialog is open\n        value.length\n            ? null\n            : {empty: new TuiValidationError('ERROR: content must not be empty')};\n}\n"}}]);