(self.webpackChunkeditor_demo=self.webpackChunkeditor_demo||[]).push([[4746],{34746:(t,n,e)=>{e.r(n),e.d(n,{default:()=>f});var o,i=e(76733),s=e(43226),r=e(14407),u=e(84911),a=e(20755),c=e(52023),l=e(68704),g=e(35057);function m(t,n){if(1&t){const t=a.EpF();a.TgZ(0,"button",2),a.NdJ("click",(function(){const n=a.CHM(t).$implicit,e=a.oxw();return a.KtG(e.setMention.emit(n))}))("keydown.enter",(function(){const n=a.CHM(t).$implicit,e=a.oxw();return a.KtG(e.setMention.emit(n))})),a._uU(1),a._UZ(2,"tui-avatar",3),a.ALo(3,"tuiInitials"),a.qZA()}if(2&t){const t=n.$implicit,e=n.index;a.Q6J("tuiAutoFocus",0==e),a.xp6(1),a.hij(" ",t.name," "),a.xp6(1),a.Q6J("src",t.avatar||a.lcZ(3,3,t.name))}}class d{constructor(){this.items=[{name:"Alexander Inkin",avatar:"https://taiga-ui.dev/assets/images/avatar.jpg",login:"a.inkin"},{name:"Roman Sedov",avatar:"",login:"r.sedov"}],this.setMention=new a.vpe}getFilteredItems(t,n){return n?.length?t.filter((({name:t,login:e})=>e.toLocaleLowerCase().startsWith(n.toLocaleLowerCase())||t.toLocaleLowerCase().startsWith(n.toLocaleLowerCase()))):t}}function p(t,n){if(1&t){const t=a.EpF();a.TgZ(0,"mentions",4),a.NdJ("setMention",(function(n){a.CHM(t);const e=a.oxw();return a.KtG(e.setMention(n))})),a.qZA()}if(2&t){const t=a.oxw();a.Q6J("mentionSuggestions",null==t.wysiwyg?null:t.wysiwyg.mentionSuggestions)}}(o=d).ɵfac=function(t){return new(t||o)},o.ɵcmp=a.Xpm({type:o,selectors:[["mentions"]],inputs:{mentionSuggestions:"mentionSuggestions"},outputs:{setMention:"setMention"},standalone:!0,features:[a.jDz],decls:2,vars:1,consts:[[3,"mouseleave.capture"],["tuiOption","",3,"tuiAutoFocus","click","keydown.enter",4,"ngFor","ngForOf"],["tuiOption","",3,"tuiAutoFocus","click","keydown.enter"],["size","s",3,"src"]],template:function(t,n){1&t&&(a.TgZ(0,"tui-data-list",0),a.NdJ("mouseleave.capture",(function(t){return t.stopPropagation()})),a.YNc(1,m,4,5,"button",1),a.qZA()),2&t&&(a.xp6(1),a.Q6J("ngForOf",n.getFilteredItems(n.items,n.mentionSuggestions)))},dependencies:[l.qiE,l.bHd,i.sg,l.XCq,g.nV$,c.biZ],encapsulation:2,changeDetection:0}),(0,u.gn)([c.UMq],d.prototype,"getFilteredItems",null);const f=(()=>{var t;class n{constructor(){this.builtInTools=[r.TuiEditorTool.Undo,r.TuiEditorTool.Size,r.TuiEditorTool.Link],this.control=new s.NI('\n        <p><span class="my-mention" data-type="mention">@a.inkin</span> FYI</p>\n    ')}setMention(t){const n=this.wysiwyg?.editor?.getOriginTiptapEditor();if(!n)return;const e=`<span class="my-mention" data-type="mention">@${t.login}</span>&nbsp;`,o=n.state.selection.to,i=n.state.selection.from-(this.wysiwyg?.mentionSuggestions.length??0)-1;n.chain().focus().insertContentAt({from:i,to:o},e).run()}}return(t=n).ɵfac=function(n){return new(n||t)},t.ɵcmp=a.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&a.Gf(r.TuiEditor,5),2&t){let t;a.iGM(t=a.CRH())&&(n.wysiwyg=t.first)}},standalone:!0,features:[a._Bn([{provide:r.TUI_EDITOR_EXTENSIONS,useValue:[Promise.resolve().then(e.bind(e,14407)).then((({TuiStarterKit:t})=>t)),Promise.resolve().then(e.bind(e,14407)).then((({TuiLink:t})=>t)),Promise.resolve().then(e.bind(e,23740)).then((({default:t})=>t)),Promise.resolve().then(e.bind(e,14407)).then((({TuiMention:t})=>t))]}]),a.jDz],decls:10,vars:5,consts:[[3,"formControl","tools"],["ngProjectAs","mention",5,["mention"]],[3,"mentionSuggestions","setMention",4,"ngIf"],[3,"content"],[3,"mentionSuggestions","setMention"]],template:function(t,n){1&t&&(a.TgZ(0,"tui-editor",0),a.ynx(1,1),a.YNc(2,p,1,1,"mentions",2),a.BQk(),a.qZA(),a.TgZ(3,"h4"),a._uU(4,"HTML:"),a.qZA(),a._UZ(5,"tui-editor-socket",3),a.TgZ(6,"h4"),a._uU(7,"Text:"),a.qZA(),a.TgZ(8,"p"),a._uU(9),a.qZA()),2&t&&(a.Q6J("formControl",n.control)("tools",n.builtInTools),a.xp6(2),a.Q6J("ngIf",null==n.wysiwyg?null:n.wysiwyg.isMentionMode),a.xp6(3),a.Q6J("content",n.control.value||""),a.xp6(4),a.Oqu(n.control.value))},dependencies:[r.TuiEditor,s.UX,s.JJ,s.oH,r.TuiEditorSocket,d,i.O5],styles:["[_nghost-%COMP%]     .my-mention{background:var(--tui-autofill);border:1px solid var(--tui-background-accent-opposite-hover);border-radius:.4rem;padding:.1rem .3rem;cursor:default}"],changeDetection:0}),n})()}}]);